## Setup

First, install the required dependencies:

```bash
pip install -r requirements.txt
```

## Examples

### 2D version

A 2D interactive Rubik's Cube visualization for debugging and understanding sticker numbering and face relationships.

Run:

```bash
python examples/numbered_cube.py
```

**Controls:**
- `F/B/L/R/U/D`: Rotate face clockwise
- `Shift+F/B/L/R/U/D`: Rotate face counter-clockwise
- `Space`: Scramble the cube
- `R`: Reset to solved state
- `N`: Toggle sticker numbers
- `Q` or `Esc`: Quit

---

### 3D version

A 3D interactive Rubik's Cube visualization using Pygame and PyOpenGL, supporting real-time rotation, zoom, and sticker/face label debugging.

Run:

```bash
python examples/interactive_3d_cube.py
```

**Controls:**
- `F/B/L/R/U/D`: Rotate face clockwise
- `Shift+F/B/L/R/U/D`: Rotate face counter-clockwise
- `Space`: Scramble the cube
- `Backspace`: Reset to solved state
- `N`: Toggle sticker numbers
- `T`: Toggle face labels
- `Mouse Drag`: Rotate view
- `Mouse Wheel`: Zoom in/out
- `Q` or `Esc`: Quit

Both versions are designed for debugging and verifying the cube's sticker mapping and move logic. The 3D version is especially useful for visually confirming the spatial relationships between faces and stickers.



---

The following paragraphs are generated by GPT. Not implemented yet.

# CubeBench

A comprehensive framework for evaluating and training VLM (Vision Language Model) embodied reasoning capabilities through interactive Rubik's cube solving.

## Overview

CubeBench places VLM agents in a partially observable 3D environment where they must actively explore and manipulate the environment through visual perception and physical operations to complete tasks. The framework provides both evaluation metrics and built-in support for supervised fine-tuning (SFT) and reinforcement learning (RL).

## Features

- **Interactive 3D Environment**: High-fidelity Rubik's cube simulation
- **Multiple Observation Modes**: Image-based and symbolic state representations
- **Flexible Action Space**: Cube rotations, view manipulations, and special actions
- **Comprehensive Rewards**: Sparse, dense, and hybrid reward functions
- **Gymnasium Compatibility**: Seamless integration with RL libraries
- **Training Support**: Built-in SFT and RL training capabilities

## Installation

```bash
# Clone the repository
git clone <repository-url>
cd CubeBench

# Install dependencies
pip install -r requirements.txt
```

## Quick Start

### Basic Usage

```python
from environment import make_cubebench_env

# Create environment
env = make_cubebench_env(
    observation_mode="image",  # or "symbolic", "both"
    max_steps=1000,
    scramble_moves=20
)

# Reset environment
obs, info = env.reset()

# Take actions
for step in range(100):
    action = env.action_space.sample()  # Random action
    obs, reward, terminated, truncated, info = env.step(action)
    
    if terminated or truncated:
        break

env.close()
```

### Running Tests

```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=environment

# Run specific test file
pytest tests/test_cube_simulator.py
```

## Project Structure

```
CubeBench/
├── environment/           # Core environment modules
│   ├── action_space.py   # Action space definitions
│   ├── cube_simulator.py # Rubik's cube simulation
│   ├── renderer.py       # Image and symbolic rendering
│   ├── reward.py         # Reward function implementations
│   └── base_env.py       # Gymnasium-compatible environment
├── tests/                # Unit tests
├── requirements.txt      # Dependencies
└── README.md            # This file
```

## Environment Components

### Action Space
- **Cube Actions**: 18 basic moves (F, F', B, B', L, L', R, R', U, U', D, D')
- **View Actions**: Camera rotations and resets
- **Special Actions**: Solve, scramble, undo

### Observation Modes
- **Image**: Visual representation of the cube
- **Symbolic**: Numerical state representation
- **Both**: Combined image and symbolic observations

### Reward Functions
- **Sparse**: Reward only for completion
- **Dense**: Reward for progress and solved faces
- **Hybrid**: Combination of sparse and dense rewards

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests for new functionality
5. Submit a pull request

## License

[Add your license here]

## Citation

If you use CubeBench in your research, please cite:

```bibtex
@misc{cubebench2024,
  title={CubeBench: A Framework for Evaluating VLM Embodied Reasoning},
  author={[Your Name]},
  year={2024},
  url={[Repository URL]}
}
```

